{%- unless page.description -%}

{%- assign description = '' -%}
{%- assign nodes = content | split: '<h2' -%}
{%- assign toc = page.toc | default: true -%}

{%- for node in nodes -%}
  {%- unless node contains '</h2>' -%}
    {%- continue -%}
  {%- endunless -%}

  {%- assign split = node | split: '>' -%}
  {%- assign header = split[1] | remove_first: '</h2'| escape -%}
  {%- if toc -%}
    {%- assign toc = false -%}
    {%- continue -%}
  {%- endif -%}
  {%- assign description = description | append: ' | ' | append: header -%}
{%- endfor -%}

{%- assign description = description | remove_first: ' | ' | truncate: 100, '...' -%}

{%- if description -%}
<meta name="description" content="{{ description }}">
<meta name="og:description" content="{{ description }}">
{%- endif -%}

{%- endunless -%}
